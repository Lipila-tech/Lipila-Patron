{% extends 'admin_layout.html' %}
{% load static %}
{% block title %} Subscription detail {% endblock %}

{% block section %}
<h2>Subscription Details</h2>
{% include '_modal.html' %}
{% include '_tier_details.html' %}

{% endblock section %}
{% block extrascripts %}
<script type="text/javascript">

    $(function () {
        function PayTierModalForm() {
            $("#send-money").modalForm({
                formURL: "{% url 'send_money_id' type='subscription' id=subscription.tier.id %}"

            }
            );
            var amount = $('#amount').val()
            var tier_name = $('#tier_name').val()
            $('#modal').on('show.bs.modal', function (event) {
                $(this).find('.modal-title').text(`Pay subscription to: ${tier_name}`);
                $(this).find('.modal-price').text(`K${amount}`);
            });
        }

        PayTierModalForm();

        // Delete tier buttons - formURL is retrieved from the data of the element
        $("#delete-subscription").modalForm({
            formURL: "{% url 'unsubscribe' tier_id=subscription.tier.id %}"
        });
    })
</script>
{%endblock extrascripts%}